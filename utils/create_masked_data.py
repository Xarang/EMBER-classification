import numpy as np
import os
import sys

x = np.memmap(sys.argv[1], dtype=np.float32, mode='c', order='C')
x = x.reshape(-1, 2351)

mask = [964,770,1132,725,831,731,696,734,834,1849,730,1141,1051,798,1185,821,1038,1485,721,803,1068,656,903,2134,796,797,850,1037,1167,881,1390,1146,971,1003,1177,720,1168,645,1062,1077,887,1163,1109,769,1124,1170,856,1117,991,1019,662,1121,664,1044,1092,1088,697,1064,1075,1863,1054,1152,1881,651,1018,1047,779,965,830,1048,869,792,1577,752,764,744,2084,768,1070,828,1087,694,1178,1103,989,1078,1063,1151,1097,1129,714,825,1015,870,1058,1091,1040,628,984,952,1022,814,1136,976,943,728,960,1127,754,818,1031,794,1165,1180,718,719,819,702,729,709,686,829,722,687,737,842,832,837]


masked_x = np.empty((len(x), len(mask)), dtype=np.float32)
print(masked_x)

for i in range(len(x)):
    vector = x[i]
    masked_x[i] = vector[mask]

print("masked_x:", masked_x)
print("masked_x shape: {}".format(masked_x.shape))
masked_x.tofile('masked_data.dat')